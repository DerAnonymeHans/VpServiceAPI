import{_ as c,o as a,c as d,b as n,F as r,g as u,d as m,l as f,p,e as g,f as l,m as h,t as _}from"./index.a762fd25.js";const i=e=>(p("data-v-53f1d6d4"),e=e(),g(),e),v=i(()=>n("header",null,[n("h2",null,"Schreibe einen Brief!"),n("h4",null,"Ganz anonym."),n("hr")],-1)),w=i(()=>n("p",null,[l(" W\xE4hle einen Empf\xE4nger und schreibe ihm/ihr was du schon immer mal schreiben wolltest - und zwar vollst\xE4ndig anonym. Bitte bleibt nett ;) "),n("br"),l(" Gesendet wird der Brief an die jeweilige Lernsax Email Adresse. ")],-1)),b=i(()=>n("label",{for:"receiver"},"W\xE4hle einen Empf\xE4nger",-1)),y={id:"receiver"},S=["value"],B=i(()=>n("textarea",{id:"textarea"},null,-1)),I={class:"center"},C={key:1},M={data(){return{users:[],receiver:"",sending:!1,modalTitle:"",modalContent:"",showModal:!1}},async mounted(){console.log("Mounted"),this.getUsers()},methods:{getUsers(){h("/Brief/Users").then(e=>e.json()).then(e=>{e.isSuccess&&(this.users=e.body)})},send(){const e=document.getElementById("receiver").value;if(e.length===0){this.modalTitle=":(",this.modalContent="W\xE4hle zuerst einen Empf\xE4nger!",this.showModal=!0;return}const t=document.getElementById("textarea").value;if(t.length===0){this.modalTitle=":(",this.modalContent="Schreibe zuerst eine Nachricht!",this.showModal=!0;return}this.sending=!0,h("/Brief/Send",{method:"POST",body:JSON.stringify({receiver:e,message:t}),headers:{"Content-Type":"application/json"}}).then(s=>(this.sending=!1,s.json())).then(s=>{if(!s.isSuccess){this.modalTitle=":(",this.modalContent=s.message,this.showModal=!0;return}this.modalTitle=":)",this.modalContent="Der Brief wurde erfolgreich versendet!",this.showModal=!0})}}},T=Object.assign(M,{__name:"Index",setup(e){return(t,s)=>(a(),d(r,null,[n("main",null,[v,w,b,n("select",y,[(a(!0),d(r,null,u(t.users,o=>(a(),d("option",{value:o},_(o),9,S))),256))]),B,n("div",I,[t.sending?(a(),d("p",C,"Sende Brief...")):(a(),d("button",{key:0,class:"btn-focus w-fit",onClick:s[0]||(s[0]=o=>t.send())},"Senden"))])]),m(f,{isOpen:t.showModal,onClose:s[1]||(s[1]=o=>t.showModal=!t.showModal),title:t.modalTitle,content:t.modalContent},null,8,["isOpen","title","content"])],64))}});var x=c(T,[["__scopeId","data-v-53f1d6d4"]]);export{x as default};
