import{_ as c,o as a,c as i,b as t,F as d,g as u,d as m,l as f,p,e as g,f as l,m as h,t as _}from"./index.902274f0.js";const r=n=>(p("data-v-56688f80"),n=n(),g(),n),v=r(()=>t("header",null,[t("h2",null,"Schreibe einen Brief!"),t("h4",null,"Ganz anonym."),t("hr")],-1)),w=r(()=>t("p",null,[l(" W\xE4hle einen Empf\xE4nger und schreibe ihm/ihr was du schon immer mal schreiben wolltest - und zwar vollst\xE4ndig anonym. Bitte bleibt nett ;) "),t("br"),l(" Gesendet wird der Brief an die jeweilige Lernsax Email Adresse. ")],-1)),b=r(()=>t("label",{for:"receiver"},"W\xE4hle einen Empf\xE4nger",-1)),y={id:"receiver"},S=["value"],B=r(()=>t("textarea",{id:"textarea"},null,-1)),I={class:"center"},C={key:1},M={data(){return{users:[],receiver:"",sending:!1,modalTitle:"",modalContent:"",showModal:!1}},async mounted(){console.log("Mounted"),this.getUsers()},methods:{getUsers(){h("/Brief/Users").then(n=>n.json()).then(n=>{n.isSuccess&&(this.users=n.body)})},send(){if(document.getElementById("receiver").value.length===0){this.modalTitle=":(",this.modalContent="W\xE4hle zuerst einen Empf\xE4nger!",this.showModal=!0;return}const e=document.getElementById("textarea").value;if(e.length===0){this.modalTitle=":(",this.modalContent="Schreibe zuerst eine Nachricht!",this.showModal=!0;return}this.sending=!0,h("/Brief/Send",{method:"POST",body:JSON.stringify({receiver:this.receiver,message:e}),headers:{"Content-Type":"application/json"}}).then(s=>(this.sending=!1,s.json())).then(s=>{if(!s.isSuccess){this.modalTitle=":(",this.modalContent=s.message,this.showModal=!0;return}this.modalTitle=":)",this.modalContent="Der Brief wurde erfolgreich versendet!",this.showModal=!0})}}},T=Object.assign(M,{__name:"Index",setup(n){return(e,s)=>(a(),i(d,null,[t("main",null,[v,w,b,t("select",y,[(a(!0),i(d,null,u(e.users,o=>(a(),i("option",{value:o},_(o),9,S))),256))]),B,t("div",I,[e.sending?(a(),i("p",C,"Sende Brief...")):(a(),i("button",{key:0,class:"btn-focus w-fit",onClick:s[0]||(s[0]=o=>e.send())},"Senden"))])]),m(f,{isOpen:e.showModal,onClose:s[1]||(s[1]=o=>e.showModal=!e.showModal),title:e.modalTitle,content:e.modalContent},null,8,["isOpen","title","content"])],64))}});var x=c(T,[["__scopeId","data-v-56688f80"]]);export{x as default};
