import{_ as c,o as i,c as o,b as t,v as r,z as v,y as l,F as h,g as p,x as f,d as g,l as _,p as b,e as w,f as u,m,t as y}from"./index.891e3b05.js";const d=e=>(b("data-v-5de431a0"),e=e(),w(),e),S=d(()=>t("header",null,[t("h2",null,"Schreibe einen Brief!"),t("h4",null,"Ganz anonym."),t("hr")],-1)),M=d(()=>t("p",null,[u(" W\xE4hle einen Empf\xE4nger und schreibe ihm/ihr was du schon immer mal schreiben wolltest - und zwar vollst\xE4ndig anonym. Bitte bleibt nett ;) "),t("br"),u(" Gesendet wird der Brief an die jeweilige Lernsax Email Adresse. ")],-1)),B=d(()=>t("label",{for:"receiver"},"W\xE4hle einen Empf\xE4nger",-1)),T=["value"],C={class:"center"},I={key:1},z={data(){return{users:[],receiver:"",body:"",sending:!1,modalTitle:"",modalContent:"",showModal:!1}},async mounted(){console.log("Mounted"),this.getUsers()},methods:{getUsers(){m("/Brief/Users").then(e=>e.json()).then(e=>{e.isSuccess&&(this.users=e.body)})},send(){if(this.receiver.length===0){this.modalTitle=":(",this.modalContent="W\xE4hle zuerst einen Empf\xE4nger!",this.showModal=!0;return}if(this.body.length===0){this.modalTitle=":(",this.modalContent="Schreibe zuerst eine Nachricht!",this.showModal=!0;return}this.sending=!0,m("/Brief/Send",{method:"POST",body:JSON.stringify({receiver:this.receiver,message:this.body}),headers:{"Content-Type":"application/json"}}).then(e=>(this.sending=!1,e.json())).then(e=>{if(!e.isSuccess){this.modalTitle=":(",this.modalContent=e.message,this.showModal=!0;return}this.modalTitle=":)",this.modalContent="Der Brief wurde erfolgreich versendet!",this.showModal=!0})}}},j=Object.assign(z,{__name:"Index",setup(e){return(n,s)=>(i(),o(h,null,[t("main",null,[S,M,B,r(t("select",{id:"receiver","onUpdate:modelValue":s[0]||(s[0]=a=>l(receiver)?receiver.value=a:null)},[(i(!0),o(h,null,p(n.users,a=>(i(),o("option",{value:a},y(a),9,T))),256))],512),[[v,n.receiver]]),r(t("textarea",{"onUpdate:modelValue":s[1]||(s[1]=a=>l(body)?body.value=a:null)},null,512),[[f,n.body]]),t("div",C,[n.sending?(i(),o("p",I,"Sende Brief...")):(i(),o("button",{key:0,class:"btn-focus w-fit",onClick:s[2]||(s[2]=a=>n.send())},"Senden"))])]),g(_,{isOpen:n.showModal,onClose:s[3]||(s[3]=a=>n.showModal=!n.showModal),title:n.modalTitle,content:n.modalContent},null,8,["isOpen","title","content"])],64))}});var E=c(j,[["__scopeId","data-v-5de431a0"]]);export{E as default};
